
# Batch: Shrimp-Keeper

---

ê³ ëž˜ ì‹¸ì›€ì— ìƒˆìš°ë“± í„°ì§€ì§€ ë§ê³  ì§€í‚¤ìž,,

â±ï¸ê¸°ê°„: 2021. 09. 08. ~ 2021. 09. 08.

ðŸƒì°¸ì—¬ìž: @ì •ì¸ì¤€


## Goal

---

ê³ ëž˜ ì‹¸ì›€ì— ìƒˆìš°ë“± í„°ì§€ì§€ ë§ìž,,

- ì§§ì€ ìˆœê°„ ê³ ëž˜ì— ì˜í•œ ì˜í–¥ì„ ê°ì§€í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ëž¨
- íŠ¹ì • ì¢…ëª©ì˜ ì •ë³´ë¥¼ 1ë¶„ ë§ˆë‹¤ ì•Œë ¤ì£¼ëŠ” í”„ë¡œê·¸ëž¨
- íŠ¹ì§•
    - `ë‹¨ê¸° ë³€í™”ìœ¨`ì— ëŒ€í•œ ì •ë³´ë¥¼ í•œ ëˆˆì— ì•Œì•„ ë³¼ ìˆ˜ ìžˆë‹¤.
    - (TODO) **ë‹¨ê¸° ë³€í™”ìœ¨ íŠ¹ì´ì  ë°œìƒ ì‹œ,** `ê³ ëž˜ ìœ„í—˜ ê²½ê³ ` **ì•ŒëžŒì´ ë³„ë„ë¡œ ìˆ˜ì‹ **ëœë‹¤.

## ì‚¬ìš©ë²•

---

### 0. (Optional) Cloud Server via Vultr

---

- [Vultr í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤](https://www.vultr.com/)ë¥¼ í†µí•´, ìƒˆìš°ì§€í‚´ì´ ì„œë²„ë¥¼ ë§Œë“ ë‹¤.
- ê°€ìž¥ ì €ë ´í•œ ì˜µì…˜ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œìž¥í•œë‹¤. ( ì•½ 5ì²œì› / ì›” )

    [spec](https://www.notion.so/568b4e20415844289b6c65a1fd94bed0)

```bash
# ë°œê¸‰ëœ IPì£¼ì†Œë¡œ ssh ì„œë²„ ì ‘ì†
> ssh root@141.164.42.27

# password ìž…ë ¥
> root@141.164.42.27's password: 
Welcome to Ubuntu 18.04.5 LTS (GNU/Linux 4.15.0-153-generic x86_64)
...

# ì•„ëž˜ì™€ ê°™ì´ í„°ë¯¸ë„ì— ë‚˜ì˜¨ë‹¤ë©´ ì •ìƒ
root@shrimpkeeper:~#
```

### 1. ssh ì„œë²„ì— node ë° npm ì„¤ì¹˜

---

```bash
# install Node.js and npm
> curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
> sudo apt-get install -y nodejs

# ì •ìƒ ì„¤ì¹˜ ë²„ì „ í™•ì¸
> node -v
> npm -v
```

### 2. intall package

---

```bash
> git clone https://github.com/Injun-Jeong/shrimp-keeper.git
> cd shrimp-keeper/
> npm install --save
```

### 3. set the file of key.json

---

ìƒˆìš°ì§€í‚´ì´ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ, ì„¤ì • ê°’ì„ `key.json` íŒŒì¼ì— ì„¸íŒ…í•œë‹¤.

```bash
> cd env/
> vim key.json

{
  "market ticker": "krw-xrp",        // ë§ˆì¼“ì‹œìž¥ë‹¨ìœ„-í‹°ì»¤(ìž˜ëª» ê¸°ìž…í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.) 
  "market": "krw",                   // ë§ˆì¼“ì‹œìž¥ë‹¨ìœ„
  "ticker": "xrp",                   // í‹°ì»¤
  "telegram chatId": "",             // í…”ë ˆê·¸ëž¨ ì±„íŒ… ì•„ì´ë””
  "telegram token": "",              // í…”ë ˆê·¸ëž¨ ì ‘ê·¼ í† í°
  "server ip address": ""            // ìƒˆìš°ì§€í‚´ì´ ì›ê²© ì„œë²„ ip:port ì£¼ì†Œ
}
```

ë‹¤ìŒê³¼ ê°™ì´, ìžì‹ ì˜ ì •ë³´ì— ë§žê²Œ ê°’ì„ ì„¸íŒ…í•œë‹¤. í…”ë ˆê·¸ëž¨ê³¼ ê´€ë ¨ëœ ì •ë³´(ì•„ì´ë””, í† í°)ëŠ” ì²¨ë¶€ëœ ë§í¬ë¥¼ ì°¸ê³ í•˜ì—¬ ìƒˆìš°ì§€í‚´ì´ ë¡œë´‡ì„ ë§Œë“¤ê³ , ìžì‹ ì˜ ì±„íŒ… ì•„ì´ë””ì™€ API ì ‘ê·¼ í† í°ì„ ì„¸íŒ…í•œë‹¤. í¬íŠ¸ ë²ˆí˜¸ëŠ” 3000ìœ¼ë¡œ í•œë‹¤.

* [í…”ë ˆê·¸ëž¨ ì •ë³´](https://juntcom.tistory.com/160)

```bash
/* update key.json file */
{
  "market ticker": "krw-xrp",        
  "market": "krw",                   
  "ticker": "xrp",                   
  "telegram chatId": "exampleChatId", 
  "telegram token": "exampleToken",    
  "server ip address": "http://141.164.42.27:3000"   // í¬íŠ¸ë²ˆí˜¸ëŠ” 3000
}
```

### 4. run program

---

ì„œë²„ë¥¼ ì‹¤í–‰ ì‹œí‚¨ í›„, í…”ë ˆê·¸ëž¨ ì•±ì— ì ‘ì†í•˜ì—¬ `/on` ëª…ë ¹ì–´ë¥¼ ìž…ë ¥í•œë‹¤.

```bash
> cd ../server/

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ì„ ìœ„í•¨
> sudo npm install -g forever
> sudo forever start server.js
```

ìƒˆìš°ì§€í‚´ì´ë¥¼ ì¤‘ì§€í•˜ê³  ì‹¶ì€ ê²½ìš°, í…”ë ˆê·¸ëž¨ ì•±ì— ì ‘ì†í•˜ì—¬ `/off` ëª…ë ¹ì–´ë¥¼ ìž…ë ¥í•œë‹¤. ë„ì›€ë§ì´ í•„ìš”í•œ ê²½ìš°, í…”ëž˜ë ˆê·¸ëž¨ ì•±ì— ì ‘ì†í•˜ì—¬ `/help` ëª…ë ¹ì–´ë¥¼ ìž…ë ¥í•œë‹¤.

ì„œë²„ì˜ ìƒˆìš°ì§€í‚´ì´ë¥¼ ë‚´ë¦¬ê³  ì‹¶ì„ ë•Œ, ë‹¤ìŒì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.

```bash
> sudo forever stopall
```


